{
  "backup_jobs": [
    {
      "name": "documents_backup",
      "enabled": false,
      "source_path": "/data/documents",
      "backup_mode": "copy",
      "targets": [
        {
          "remote": "gdrive",
          "path": "backup/documents",
          "enabled": true
        },
        {
          "remote": "onedrive",
          "path": "backup/documents",
          "enabled": true
        }
      ],
      "schedule": "0 2 * * *",
      "options": [
        "--progress",
        "--transfers=4",
        "--checkers=8",
        "--exclude=*.tmp",
        "--exclude=*.log",
        "--exclude=.DS_Store"
      ],
      "hooks": {
        "pre_backup": {
          "enabled": false,
          "script": "/app/hooks/pre-backup-documents.sh",
          "timeout": 300,
          "fail_on_error": true
        },
        "post_backup": {
          "enabled": false,
          "script": "/app/hooks/post-backup-documents.sh",
          "timeout": 60,
          "fail_on_error": false
        }
      }
    },
    {
      "name": "photos_backup",
      "enabled": false,
      "source_path": "/data/photos",
      "backup_mode": "sync",
      "targets": [
        {
          "remote": "gdrive",
          "path": "backup/photos",
          "enabled": true
        }
      ],
      "schedule": "0 3 * * 0",
      "options": [
        "--progress",
        "--transfers=2",
        "--checkers=4",
        "--exclude=*.tmp"
      ]
    },
    {
      "name": "backup",
      "enabled": false,
      "source_path": "/data/backup",
      "backup_mode": "copy",
      "targets": [
        {
          "remote": "minio",
          "path": "public/backup",
          "enabled": true
        }
      ],
      "schedule": "52 3 * * *",
      "options": [
        "--progress",
        "--transfers=2",
        "--checkers=4",
        "--exclude=*.tmp"
      ],
      "hooks": {
        "pre_backup": {
          "enabled": true,
          "script": "/app/hooks/compress-backup.sh",
          "timeout": 1800,
          "fail_on_error": true,
          "description": "压缩备份目录为 tar.xz 格式"
        }
      }
    },
    {
      "name": "database_backup",
      "enabled": false,
      "source_path": "/tmp/db-backup",
      "backup_mode": "copy",
      "targets": [
        {
          "remote": "s3",
          "path": "database-backups",
          "enabled": true
        }
      ],
      "schedule": "0 1 * * *",
      "options": [
        "--progress",
        "--transfers=1",
        "--checkers=2"
      ],
      "hooks": {
        "pre_backup": {
          "enabled": true,
          "script": "/app/hooks/dump-database.sh",
          "timeout": 3600,
          "fail_on_error": true,
          "description": "导出数据库到临时目录"
        },
        "post_backup": {
          "enabled": true,
          "script": "/tmp/db-backup/cleanup.sh",
          "timeout": 60,
          "fail_on_error": false,
          "description": "清理数据库导出文件"
        }
      }
    }
  ],
  "sync_jobs": [
    {
      "name": "documents_sync",
      "enabled": false,
      "destination_path": "/data/synced/documents",
      "sources": [
        {
          "remote": "gdrive",
          "path": "shared/documents",
          "enabled": true
        },
        {
          "remote": "onedrive",
          "path": "shared/documents",
          "enabled": false
        }
      ],
      "schedule": "0 1 * * *",
      "sync_mode": "copy",
      "options": [
        "--progress",
        "--transfers=4",
        "--checkers=8",
        "--exclude=*.tmp",
        "--exclude=*.log",
        "--exclude=.DS_Store"
      ]
    },
    {
      "name": "photos_sync",
      "enabled": false,
      "destination_path": "/data/synced/photos",
      "sources": [
        {
          "remote": "gdrive",
          "path": "shared/photos",
          "enabled": true
        }
      ],
      "schedule": "0 4 * * *",
      "sync_mode": "sync",
      "options": [
        "--progress",
        "--transfers=2",
        "--checkers=4",
        "--exclude=*.tmp"
      ]
    }
  ],
  "global_options": {
    "log_level": "INFO",
    "log_file": "/var/log/backup/backup.log",
    "sync_log_file": "/var/log/backup/sync.log",
    "max_log_size": "10M",
    "max_log_files": 5
  }
}